<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¸ç”Ÿè³‡è¨Šç®¡ç†ç³»çµ±</title>
    <style>
        table, th, td {
            border: gray 2px solid;
            border-collapse: collapse;
        }    
    </style>
</head>

<body>

    <h1>å­¸ç”Ÿåˆ—è¡¨</h1>

    <table id="student-list" style="width: 80%">
        <tr><th>Name</th><th>Age</th><th>Grade</th></the></tr>
    </table>

    <h2>æ–°å¢å­¸ç”Ÿ</h2>

    <form id="add-student-form">
        <label for="name">å§“åï¼š</label>
        <input type="text" id="name" name="name" required>

        <label for="age">å¹´é½¡ï¼š</label>
        <input type="number" id="age" name="age" required>

        <label for="grade">å¹´ç´šï¼š</label>
        <input type="text" id="grade" name="grade" required>

        <button type="submit">æ–°å¢</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
        $(document).ready(function () {
            // å–å¾—å­¸ç”Ÿåˆ—è¡¨
            $.get('students', function (students) {
                const studentList = $('#student-list');
                students.forEach(function (student) {
                    studentList.append(`<tr><td>${student.name}</td><td>${student.age}æ­²</td><td>${student.grade}å¹´ç´š</td></tr>`);
                });
            });

            // æ–°å¢å­¸ç”Ÿ
            $('#add-student-form').submit(function (event) {
                event.preventDefault(); //é¿å…è·³é 

                const name = $('#name').val();
                const age = $('#age').val();
                const grade = $('#grade').val();

                $.post('students', { name, age, grade }, function (newStudent) {
                    $('#student-list').append(`<tr><td>${newStudent.name}</td><td>${newStudent.age}æ­²</td><td>${newStudent.grade}å¹´ç´š</td></tr>`);
                    $('#add-student-form')[0].reset(); /*åŸ·è¡Œæ™‚é‡åˆ° error è¨Šæ¯ï¼Œæœ€å¾Œæœ‰è‡ªå·±å¢åŠ  "[0]" ï¼ˆå¸Œæœ›ä¸æœƒå½±éŸ¿åˆ°æˆç¸¾ğŸ¥²)*/
                });
            });
        });


    </script>
</body>

</html>